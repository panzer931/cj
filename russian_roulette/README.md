# MaiBot-Roulette-Plugin (Updated)

这是为 MaiM-with-u 项目开发的麦麦轮盘插件，模拟真实的俄罗斯轮盘玩法，支持多种自定义设置和趣味互动。

## 更新说明

本插件已从旧版本 (v1.0.0) 更新适配到当前 MaiBot 版本 (v1.1.0)，主要更新内容：

### 🔄 兼容性更新
- ✅ 适配最新的 MaiBot 插件系统架构
- ✅ 更新导入路径和API调用方式
- ✅ 修复了与当前版本的兼容性问题
- ✅ 优化了错误处理和日志记录

### 📁 目录结构变更
```
旧版本: plugins/MaiBot-Roulette-Plugins-main/MaiBot-Roulette-Plugins-main/russian_roulette/
新版本: plugins/russian_roulette/
```

### 🛠️ 技术改进
- 使用最新的插件系统基类和装饰器
- 改进了配置文件结构和验证
- 优化了异步处理和错误恢复
- 增强了日志记录和调试信息

## 插件简介

本插件适配 MaiM-with-u 最新的插件系统，能够为群友们带来刺激的俄罗斯轮盘体验。玩法简单，规则灵活，适合娱乐和活跃气氛。

## 主要功能

- ✨ 支持经典俄罗斯轮盘玩法
- ⚙️ 可自定义子弹数量、参与人数等参数
- 💬 互动式消息回复，模拟真实紧张氛围
- 🔧 兼容最新 MaiBot 插件系统
- 📊 完整的游戏状态管理和超时处理
- 🛡️ 健壮的错误处理和恢复机制

## 配置选项

插件支持以下配置项（在 `config.toml` 中）：

### 游戏设置
- `max_wait_time`: 最大等待时间（默认120秒）
- `max_participants`: 最大参与人数（默认6人）
- `min_mute_time`: 最小禁言时间（默认60秒）
- `max_mute_time`: 最大禁言时间（默认3600秒）

### 日志设置
- `level`: 日志级别（INFO/DEBUG/WARNING/ERROR）
- `prefix`: 日志前缀（默认"[russian_roulette]"）

## 使用方法

1. ✅ 插件已自动放置在正确的目录 `plugins/russian_roulette/`
2. 🔧 根据需要修改 `config.toml` 中的配置
3. 🔄 重启 MaiBot
4. 💬 在群聊中使用指令 `麦麦开枪` 即可开始游戏

## 指令说明

- `麦麦开枪`：开始一局轮盘游戏

## 游戏规则

1. 👥 玩家在群聊中发送 `麦麦开枪` 参与游戏
2. ⏱️ 系统等待更多玩家加入（最多6人，可配置）
3. ⏰ 达到人数上限或等待时间结束后开始抽取
4. 🎯 随机选择一名"幸运"玩家进行禁言
5. 🔇 被选中的玩家将被禁言随机时长

## 注意事项

- ⚠️ 本插件仅供娱乐，请勿用于任何真实危险行为的模拟或鼓励
- 🏠 游戏仅在群聊环境中可用
- 👤 每个玩家在同一局游戏中只能参与一次
- ⏱️ 游戏有超时机制，超时后自动执行抽取
- 🔧 若遇到兼容性问题，请检查配置文件或查看日志

## 版本历史

### v1.1.0 (当前版本)
- 适配最新 MaiBot 插件系统
- 优化代码结构和错误处理
- 改进配置文件格式
- 增强日志记录功能

### v1.0.0 (旧版本)
- 初始版本
- 基础俄罗斯轮盘功能

## 鸣谢

- 感谢 MaiM-with-u 项目组的支持与指导
- 感谢原作者 野生的金属乌帕 的创意和实现

---

如有建议或问题，欢迎提交 issue 或 PR。